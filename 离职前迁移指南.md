# 离职前迁移指南

## ⚠️ 重要提醒

**当前定时任务在你的个人电脑上运行**，如果你离职：
- ❌ 会占用你的网络带宽
- ❌ 会占用你的电脑资源
- ❌ 如果电脑关机，定时任务不会执行

## 🎯 解决方案

### 方案 1: 迁移到同事的电脑（推荐，简单）

如果同事有 Mac 或 Linux 电脑：

1. **在同事电脑上设置**：
   ```bash
   # 1. 克隆代码（或从 GitHub 拉取）
   git clone https://github.com/anniezty/us-china-news-scraper.git
   
   # 2. 安装依赖
   pip3 install -r requirements.txt
   
   # 3. 配置凭证（复制 google_credentials.json）
   
   # 4. 设置定时任务（使用相同的命令）
   crontab -e
   # 添加相同的 3 行定时任务
   ```

2. **从你的电脑删除定时任务**：
   ```bash
   crontab -e
   # 删除所有 daily_collector_to_sheets 相关的行
   ```

---

### 方案 2: 使用云服务器（推荐，最稳定）

使用免费的云服务：

#### 选项 A: Railway / Render（免费额度）

1. **部署到 Railway**：
   - 连接 GitHub 仓库
   - 设置环境变量
   - 使用 cron job 或 scheduled tasks

2. **部署到 Render**：
   - 创建 Cron Job
   - 设置执行时间

#### 选项 B: GitHub Actions（免费，简单）

1. **创建 `.github/workflows/daily_collector.yml`**：
   ```yaml
   name: Daily Collector
   
   on:
     schedule:
       - cron: '7 8 * * *'  # 早上 8:07 UTC（需要转换为你的时区）
       - cron: '7 15 * * *' # 下午 15:07 UTC
       - cron: '37 23 * * *' # 晚上 23:37 UTC
   
   jobs:
     collect:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v2
         - name: Set up Python
           uses: actions/setup-python@v2
           with:
             python-version: '3.11'
         - name: Install dependencies
           run: pip install -r requirements.txt
         - name: Run collector
           env:
             GOOGLE_SHEETS_ID: ${{ secrets.GOOGLE_SHEETS_ID }}
             GOOGLE_CREDENTIALS_JSON: ${{ secrets.GOOGLE_CREDENTIALS_JSON }}
           run: python3 daily_collector_to_sheets.py
   ```

2. **在 GitHub Secrets 中配置**：
   - `GOOGLE_SHEETS_ID`
   - `GOOGLE_CREDENTIALS_JSON`（JSON 字符串）

---

### 方案 3: 使用公司服务器（如果有）

如果公司有服务器或 Linux 机器：
1. 在服务器上设置 cron
2. 配置凭证
3. 从你的电脑删除定时任务

---

## 🔧 从你的电脑删除定时任务

如果你要离职，记得删除定时任务：

```bash
# 方法 1: 编辑 crontab
crontab -e
# 删除所有 daily_collector_to_sheets 相关的行

# 方法 2: 直接删除所有相关任务
crontab -l | grep -v "daily_collector_to_sheets" | crontab -

# 验证已删除
crontab -l | grep daily_collector
# 应该没有输出
```

---

## 📋 迁移检查清单

### 迁移前（在你的电脑）

- [ ] 确认同事或服务器可以运行定时任务
- [ ] 准备好 `google_credentials.json` 文件
- [ ] 确认 GitHub 仓库已更新（代码已推送）

### 迁移后（在新环境）

- [ ] 克隆代码仓库
- [ ] 安装 Python 依赖
- [ ] 配置 Google 凭证
- [ ] 设置定时任务
- [ ] 测试运行一次
- [ ] 验证定时任务已设置

### 清理（你的电脑）

- [ ] 删除定时任务
- [ ] （可选）删除 `google_credentials.json`（如果不再需要）

---

## 💡 推荐方案

**如果你 12 月离职**，我建议：

1. **短期**（交接期间）：
   - 保持在你电脑上运行
   - 确保同事知道如何访问网站和 Google Sheets

2. **长期**（离职后）：
   - **推荐使用 GitHub Actions**（免费、可靠、不需要服务器）
   - 或迁移到同事的电脑
   - 从你的电脑删除定时任务

---

## 🆘 需要帮助？

如果选择 GitHub Actions，我可以帮你：
1. 创建 workflow 文件
2. 配置 GitHub Secrets
3. 调整时区（UTC 转换）

告诉我你的选择，我可以帮你设置！

