# âœ… æµ‹è¯•å®Œæˆæ¸…å•

## ğŸ‰ æµ‹è¯•ç»“æœ

### âœ… 1. å‡­è¯æ–‡ä»¶æ£€æŸ¥
- **çŠ¶æ€**: âœ… å·²æ‰¾åˆ°å¹¶å¤åˆ¶åˆ°é¡¹ç›®ç›®å½•
- **æ–‡ä»¶ä½ç½®**: `/Users/tingyuzheng/Downloads/us_china_picker/google_credentials.json`
- **Service Account**: `us-china-scraper@us-china-news-scraper.iam.gserviceaccount.com`
- **Project ID**: `us-china-news-scraper`

### âœ… 2. ä¸Šä¼ åŠŸèƒ½æµ‹è¯•
- **çŠ¶æ€**: âœ… **æˆåŠŸï¼**
- **æµ‹è¯•ç»“æœ**: æˆåŠŸä¸Šä¼  **48 ç¯‡æ–‡ç« ** åˆ° Google Sheets
- **Sheet åç§°**: `Week 2025-11-03`
- **æ•°æ®æ¥æº**: NYT, SCMP, Reuters

### âœ… 3. Streamlit Cloud é…ç½®
- **çŠ¶æ€**: â³ å¾…é…ç½®ï¼ˆéœ€è¦ä½ æ‰‹åŠ¨æ“ä½œï¼‰
- **é…ç½®ä½ç½®**: Streamlit Cloud â†’ Settings â†’ Secrets

---

## ğŸ“‹ ä¸‹ä¸€æ­¥æ“ä½œ

### æ­¥éª¤ 1: éªŒè¯ Google Sheets

æ‰“å¼€ä½ çš„ Google Sheets æ£€æŸ¥ï¼š
- URL: https://docs.google.com/spreadsheets/d/1Cltg8pq-jhtgR6_lysW-gNIe9JSKOh2vCT4Pxo7pcpA/edit
- åº”è¯¥èƒ½çœ‹åˆ°æ–°çš„ Sheet: `Week 2025-11-03`
- åŒ…å« 48 è¡Œæ•°æ®

### æ­¥éª¤ 2: é…ç½® Streamlit Cloud Secrets

1. **è®¿é—® Streamlit Cloud**: https://share.streamlit.io
2. **æ‰“å¼€ä½ çš„åº”ç”¨** â†’ **Settings** â†’ **Secrets**
3. **ç²˜è´´ä»¥ä¸‹å†…å®¹**ï¼ˆè§ä¸‹æ–¹ï¼‰

```toml
GOOGLE_SHEETS_ID = "1Cltg8pq-jhtgR6_lysW-gNIe9JSKOh2vCT4Pxo7pcpA"

[google_sheets]
credentials = '''
{
  "type": "service_account",
  "project_id": "us-china-news-scraper",
  "private_key_id": "ä»ä½ çš„ google_credentials.json å¤åˆ¶å®Œæ•´å†…å®¹",
  "private_key": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n",
  "client_email": "us-china-scraper@us-china-news-scraper.iam.gserviceaccount.com",
  "client_id": "...",
  "auth_uri": "https://accounts.google.com/o/oauth2/auth",
  "token_uri": "https://oauth2.googleapis.com/token",
  "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
  "client_x509_cert_url": "..."
}
'''
```

**é‡è¦**: å°† `credentials = '''...'''` ä¸­çš„å†…å®¹æ›¿æ¢ä¸º `google_credentials.json` çš„**å®Œæ•´å†…å®¹**

### æ­¥éª¤ 3: éªŒè¯ Google Sheets åˆ†äº«

âš ï¸ **å¿…é¡»æ“ä½œ**: ç¡®ä¿ Google Sheets å·²åˆ†äº«ç»™ Service Account

1. æ‰“å¼€ Google Sheets
2. ç‚¹å‡» "Share"ï¼ˆåˆ†äº«ï¼‰
3. æ·»åŠ é‚®ç®±: `us-china-scraper@us-china-news-scraper.iam.gserviceaccount.com`
4. è®¾ç½®æƒé™ä¸º "Editor"
5. ç‚¹å‡» "Send"

### æ­¥éª¤ 4: æµ‹è¯•ç½‘ç«™

1. ç­‰å¾… Streamlit Cloud é‡æ–°éƒ¨ç½²ï¼ˆ1-2åˆ†é’Ÿï¼‰
2. æ‰“å¼€ä½ çš„ç½‘ç«™
3. å‹¾é€‰ "ä» Google Sheets è¯»å–å†å²æ•°æ®"
4. è¾“å…¥ Spreadsheet ID: `1Cltg8pq-jhtgR6_lysW-gNIe9JSKOh2vCT4Pxo7pcpA`
5. ç‚¹å‡» "Generate & Export"
6. åº”è¯¥èƒ½çœ‹åˆ° "âœ… ä» Google Sheets è¯»å–äº† X æ¡å†å²æ•°æ®"

---

## ğŸ¯ å®šæ—¶ä»»åŠ¡è®¾ç½®ï¼ˆå¯é€‰ä½†æ¨èï¼‰

### æ–¹å¼ 1: Cronï¼ˆæ¨èï¼‰

```bash
# ç¼–è¾‘ crontab
crontab -e

# æ·»åŠ ä»¥ä¸‹è¡Œï¼ˆæ¯å¤©ä¸Šåˆ 9:00 æ‰§è¡Œï¼‰
0 9 * * * cd /Users/tingyuzheng/Downloads/us_china_picker && GOOGLE_SHEETS_ID="1Cltg8pq-jhtgR6_lysW-gNIe9JSKOh2vCT4Pxo7pcpA" GOOGLE_CREDENTIALS_PATH="/Users/tingyuzheng/Downloads/us_china_picker/google_credentials.json" /usr/bin/python3 daily_collector_to_sheets.py >> /Users/tingyuzheng/Downloads/us_china_picker/logs/daily_collector.log 2>&1
```

**åˆ›å»ºæ—¥å¿—ç›®å½•**:
```bash
mkdir -p /Users/tingyuzheng/Downloads/us_china_picker/logs
```

### æ–¹å¼ 2: LaunchAgentï¼ˆMacï¼‰

è§ `å®šæ—¶ä»»åŠ¡è®¾ç½®æŒ‡å—.md`

---

## âœ… å®Œæˆæ£€æŸ¥æ¸…å•

- [x] å‡­è¯æ–‡ä»¶å·²æ‰¾åˆ°å¹¶å¤åˆ¶
- [x] ä¸Šä¼ åŠŸèƒ½æµ‹è¯•æˆåŠŸï¼ˆ48ç¯‡æ–‡ç« ï¼‰
- [ ] Google Sheets å·²åˆ†äº«ç»™ Service Account
- [ ] Streamlit Cloud Secrets å·²é…ç½®
- [ ] ç½‘ç«™å¯ä»¥è¯»å– Google Sheets æ•°æ®
- [ ] å®šæ—¶ä»»åŠ¡å·²è®¾ç½®ï¼ˆå¯é€‰ï¼‰

---

## ğŸ‰ æ­å–œï¼

ä½ çš„ç³»ç»Ÿå·²ç»å‡†å¤‡å¥½äº†ï¼š
- âœ… æ•°æ®æ”¶é›†åŠŸèƒ½æ­£å¸¸
- âœ… ä¸Šä¼ åˆ° Google Sheets åŠŸèƒ½æ­£å¸¸
- â³ åªéœ€å®Œæˆ Streamlit Cloud é…ç½®å³å¯

